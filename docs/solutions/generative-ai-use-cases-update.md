# GenU ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼å¤‰æ›´ã€å‰Šé™¤ã®æ–¹æ³•

GenU ã‚’ 1 click ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚ã¨ã«ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼å¤‰æ›´ã‚’è¡Œã†æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚GenU ã§ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹è©³ç´°ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯ã€[GenU ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://aws-samples.github.io/generative-ai-use-cases/ja/ABOUT.html)ã‚’ã”ç¢ºèªãã ã•ã„ã€‚

## 2ã¤ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ–¹æ³•

GenU ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã¯ä»¥ä¸‹ã®2ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ï¼š

### ğŸš€ **æ–¹æ³•1: 1 click ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆï¼ˆæ¨å¥¨ï¼‰**
- **æ›´æ–°æ–¹æ³•**: ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ 1 click ã§å‰å›ã®ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®šã‚’å¼•ãç¶™ã„ã§æ›´æ–°ã§ãã¾ã™
- **ç”¨é€”**: è¨­å®šã‚’å¤‰æ›´ã›ãšã«ã€GenU ã ã‘æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æ›´æ–°ã—ãŸã„å ´åˆ (â€»)
- **ãƒ¡ãƒªãƒƒãƒˆ**: é–‹ç™ºç’°å¢ƒã®æº–å‚™ã¯ä¸è¦

â€»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼åãªã©ã«å¤‰æ›´ãŒã‚ã£ãŸå ´åˆã€è¨­å®šãŒã†ã¾ãåæ˜ ã•ã‚Œãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚äº‹å‰ã«å‰å›ã®è¨­å®šã‚’ä¿å­˜ã—ã¦ã„ã‚‹ [AWS Systems Manager Parameter Store](https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/systems-manager-parameter-store.html) ã®å†…å®¹ã¨ã€[GenU ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://aws-samples.github.io/generative-ai-use-cases/ja/ABOUT.html) ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

### ğŸ› ï¸ **æ–¹æ³•2: SageMaker Studio Code Editorï¼ˆä¸Šç´šè€…å‘ã‘ï¼‰**
- **æ›´æ–°æ–¹æ³•**: SageMaker Studio Code Editor ã«é–‹ç™ºç’°å¢ƒã‚’ç”¨æ„ã— GenU ã‚’æ›´æ–°ã—ã¾ã™
- **ç”¨é€”**: 1 click ã§ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®å¤‰æ›´ã‚„ã€ç‹¬è‡ªã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹é–‹ç™ºã‚’è¡Œã†å ´åˆ
- **ãƒ¡ãƒªãƒƒãƒˆ**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å¤‰æ›´ã—ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã„å ´åˆã€Git ã§æ›´æ–°å±¥æ­´ã‚’ç®¡ç†ã—ãŸã„å ´åˆ

---

## æ–¹æ³•1: 1 click ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

æœ€ã‚‚ç°¡å˜ãªæ–¹æ³•ã§ã™ã€‚å‰å›ã®ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®šã‚’è‡ªå‹•ã§å¼•ãç¶™ã„ã§ã€GenUã‚’æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æ›´æ–°ã§ãã¾ã™ã€‚

### ç¾åœ¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ç¢ºèª


1 click ãƒ‡ãƒ—ãƒ­ã‚¤ã§ã¯ã€GenU ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«åˆ©ç”¨ã—ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ [AWS Systems Manager Parameter Store](https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/systems-manager-parameter-store.html) ã« JSON å½¢å¼ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚

[Parameter Store ã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ (â€»æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ (`ap-northeast-1`) ã®ç”»é¢ã§ã™)](https://ap-northeast-1.console.aws.amazon.com/systems-manager/parameters)ã‚’é–‹ãã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¾ã™ã€‚æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ä»¥å¤–ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸå ´åˆã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§ç¢ºèªã—ã¾ã—ã‚‡ã† (`us-east-1` ãªã©)ã€‚

ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã¨ãã«æŒ‡å®šã—ãŸ Environment å (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `dev`) ã§ã€ä»¥ä¸‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã™  
- `/genu/dev.json` - dev ç’°å¢ƒã®ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã§ä¿å­˜  

!!! Tip
    `staging`, `prod` ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸå ´åˆã¯ãã‚Œãã‚Œ `/genu/staging.json` ã€`/genu/prod.json` ã¨ãªã‚Šã¾ã™ã€‚ 

![parameter-store-01](../assets/images/solutions/generative-ai-use-cases-update/parameter-store-01.png)


ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å†…å®¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªJSONå½¢å¼ã§ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ï¼š

```json
{
  "modelRegion": "us-east-1",
  "modelIds": [
    "us.anthropic.claude-sonnet-4-20250514-v1:0",
    "us.anthropic.claude-opus-4-20250514-v1:0",
    "us.deepseek.r1-v1:0",
    "us.anthropic.claude-3-7-sonnet-20250219-v1:0",
    "us.anthropic.claude-3-5-haiku-20241022-v1:0",
    "us.amazon.nova-premier-v1:0",
    "us.amazon.nova-pro-v1:0",
    "us.amazon.nova-lite-v1:0",
    "us.amazon.nova-micro-v1:0"
  ],
  "ragKnowledgeBaseEnabled": false,
  "selfSignUpEnabled": false,
  "allowedSignUpEmailDomains": null,
  "allowedIpV4AddressRanges": null,
  "allowedIpV6AddressRanges": null
}
```

ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ç”»é¢ä¾‹ã§ã™ (`Show decrypted value` ã‚’ã‚ªãƒ³ã«ã™ã‚‹ã¨å€¤ã‚’å‚ç…§ã§ãã¾ã™)ã€‚  
![parameter-store-02](../assets/images/solutions/generative-ai-use-cases-update/parameter-store-02.png)

ã“ã® JSON ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ã€å¾Œè¿°ã®æ‰‹é †ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç¢ºèªã‚„å¤‰æ›´ãŒå¯èƒ½ã§ã™ (æ–¹æ³• 1ã€æ–¹æ³• 2 ã„ãšã‚Œã§ã‚‚ä½¿ç”¨ã—ã¾ã™)ã€‚

### æ‰‹é †

1. **[GenU ãƒ‡ãƒ—ãƒ­ã‚¤ãƒšãƒ¼ã‚¸](../../)** ã«ã‚¢ã‚¯ã‚»ã‚¹
2. **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠ** (å‰å›ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¨åŒã˜ã‚‚ã®ã‚’é¸æŠ)
3. **Parameter Store ã®å†…å®¹ãŒå•é¡Œãªã‘ã‚Œã°ã€ŒUpdateã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯**
4. CloudFormationç”»é¢ã§ä»¥ä¸‹ã‚’ç¢ºèªï¼š
    - `UsePreviousDeploymentParameter` ãŒ `true` ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
    - `Environment` ã‚’å‰å›ã¨åŒã˜å€¤ã«è¨­å®š (é€šå¸¸ã¯ `dev`)
    - `NotificationEmailAddress` ã«ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›
5. **ã€ŒCreate stackã€ã‚’ã‚¯ãƒªãƒƒã‚¯**

### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å¤‰æ›´ã—ã¦æ›´æ–°ã—ãŸã„å ´åˆ

GenU ã§åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ãŒå¢—ãˆãŸå ´åˆã€modelRegion ã®åˆ¶ç´„ã§ä½¿ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ãŒæƒ³å®šã¨ç•°ãªã£ã¦ã„ãŸå ´åˆãªã©ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®éš›ã€Parameter Store ã®å†…å®¹ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€å¤‰æ›´ã‚’åæ˜ ã—ãŸãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ (å›³ä¸­ ãƒ»ãƒ»ãƒ» ã¨ãªã£ã¦ã„ã‚‹ Value ã®ç®‡æ‰€ã¯ã€ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™)ã€‚
![genu-update-click-01](../assets/images/solutions/generative-ai-use-cases-update/genu-update-click-01.png)

GenU ãŒå¯¾å¿œã—ã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã¯[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://aws-samples.github.io/generative-ai-use-cases/ja/DEPLOY_OPTION.html#amazon-bedrock-%E3%81%AE%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8B)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## æ–¹æ³•2: SageMaker Studio Code Editor ã§ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

è©³ç´°ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼å¤‰æ›´ã‚„ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¿…è¦ãªå ´åˆã¯ã€ã“ã®æ–¹æ³•ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚

ä»¥ä¸‹ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¡Œã„ã¾ã™ :

* 1 click ãƒ‡ãƒ—ãƒ­ã‚¤ã§è‡ªå‹•ç”Ÿæˆã—ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ [AWS Systems Manager Parameter Store](https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/systems-manager-parameter-store.html) ã‹ã‚‰ç¢ºèª
* [Amazon SageMaker Studio Code Editor](https://docs.aws.amazon.com/ja_jp/sagemaker/latest/dg/code-editor.html) ã§é–‹ç™ºç’°å¢ƒã‚’æº–å‚™
* CDK ã‚’ä½¿ã£ã¦ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼å¤‰æ›´

### SageMaker Code Editor ã§é–‹ç™ºç’°å¢ƒã‚’æº–å‚™
GenU ç’°å¢ƒã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã«ã€SageMaker Code Editor ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ã€CloudFormation ã‚’åˆ©ç”¨ã—ã¦ä½œæˆã‚’ã—ã¾ã™ã€‚

!!! Tip
    GenU ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ±äº¬ã‹ã‚‰æ„è­˜ã—ã¦å¤‰æ›´ã—ãŸå ´åˆã¯ã€SageMaker Code Editor ã®ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚å¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚æ„è­˜ã—ã¦ã„ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã® URL ã‹ã‚‰æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«ãƒ‡ãƒ—ãƒ­ã‚¤ãã ã•ã„ã€‚  

!!! Warning
    æ–™é‡‘ã«ã¤ã„ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® ml.t3.medium ã‚’æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§ç¨¼åƒã™ã‚‹å ´åˆã€1 æ™‚é–“ã‚ãŸã‚Š $0.065 ãŒç™ºç”Ÿã—ã¾ã™ã€‚ä¸€å®šæ™‚é–“æ“ä½œã‚’è¡Œã‚ãªã„æ™‚ã«ã¯ Code Editor ãŒè‡ªå‹•åœæ­¢ã•ã‚Œã‚‹ãŸã‚ã€ã‚³ã‚¹ãƒˆæœ€é©åŒ–ãŒã•ã‚Œã¦ã„ã¾ã™ã€‚

[![](https://s3.amazonaws.com/cloudformation-examples/cloudformation-launch-stack.png)](https://ap-northeast-1.console.aws.amazon.com/cloudformation/home?region=ap-northeast-1#/stacks/quickcreate?stackName=CodeEditorStack&templateURL=https://ws-assets-prod-iad-r-nrt-2cb4b4649d0e0f94.s3.ap-northeast-1.amazonaws.com/9748a536-3a71-4f0e-a6cd-ece16c0e3487/cloudformation/CodeEditorStack.template.yaml&param_UseDefaultVpc=true&param_EbsSizeInGb=20&param_InstanceType=ml.t3.medium&param_AutoStopIdleTimeInMinutes=180) 

CloudFormation ãŒé–‹ã‹ã‚Œã‚‹ã®ã§ã€ç”»é¢ä¸‹éƒ¨ã«ãƒã‚§ãƒƒã‚¯ã‚’ã„ã‚Œã¦ã€Create stack ã‚’æŠ¼ã—ã¾ã™ã€‚  
![codeeditor-setup-01](../assets/images/solutions/generative-ai-use-cases-update/codeeditor-setup-01.png)

Stack ã®ä½œæˆãŒå§‹ã¾ã‚Šã€ç´„ 7 åˆ†å¾Œ CREATE_COMPLETE ã«ãªã‚Šã¾ã™ã€‚ãã®å¾Œã€Outputs ã‚¿ãƒ–ã‹ã‚‰ SageMakerSudioUrl ã‚’é–‹ãã¾ã™ã€‚  
![codeeditor-setup-02](../assets/images/solutions/generative-ai-use-cases-update/codeeditor-setup-02.png)

SageMaker Studio AI ã®ç”»é¢ãŒé–‹ã‹ã‚Œã‚‹ã®ã§ã€Skip ã‚’æŠ¼ã—ã¾ã™ã€‚  
![codeeditor-setup-03](../assets/images/solutions/generative-ai-use-cases-update/codeeditor-setup-03.png)

Code Editor ã‚’é–‹ãã€Open ã‚’æŠ¼ã—ã¾ã™ã€‚Stop ã—ã¦ã„ãŸå ´åˆã€Start ã§èµ·å‹•ã‚’ã—ãŸã‚ã¨ã€Open ã‚’æŠ¼ã—ã¾ã™ã€‚  
![codeeditor-setup-04](../assets/images/solutions/generative-ai-use-cases-update/codeeditor-setup-04.png)


### CDK ã‚’ä½¿ã£ã¦ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼å¤‰æ›´
SageMaker Code Editor ã®ç”»é¢ã‚’é–‹ã‘ã¾ã—ãŸã€‚New Terminal ã‚’æŠ¼ã—ã¾ã™ã€‚  
![genu-update-01](../assets/images/solutions/generative-ai-use-cases-update/genu-update-01.png)

Terminal ä¸Šã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€æœ€æ–°ã® GenU ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ clone ã—ã¾ã™ã€‚æœ€æ–°ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ clone ã™ã‚‹ã“ã¨ã§ã€GenU ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ãŒå¯èƒ½ã§ã™ã€‚2 å›ç›®ä»¥é™ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§ã€æ—¢ã« git clone ã‚’ã—ã¦ã„ã‚‹å ´åˆã¯ã€[ã“ã¡ã‚‰ã®æ‰‹é †](#second-time-update)ã‚’ã”å‚ç…§ãã ã•ã„ã€‚
```shell
git clone https://github.com/aws-samples/generative-ai-use-cases.git
```

ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã™ã‚‹æ¬„ã«ã¤ã„ã¦ç”»åƒã§ç´¹ä»‹ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ç”»åƒã§èª¬æ˜ã—ã¦ã„ã‚‹ã‚ˆã†ã«ã€ç”»é¢ä¸‹éƒ¨ã« Terminal ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ã“ã“ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚  
![genu-update-02](../assets/images/solutions/generative-ai-use-cases-update/genu-update-02.png)

clone ã—ã¦ããŸãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ãã¾ã™ã€‚  
![genu-update-03](../assets/images/solutions/generative-ai-use-cases-update/genu-update-03.png)

Yes, I trust the authors ã‚’æŠ¼ã—ã¾ã™ã€‚  
![genu-update-04](../assets/images/solutions/generative-ai-use-cases-update/genu-update-04.png)

`packages/cdk/parameter.ts` ã‚’é–‹ãã¾ã™ã€‚  
![genu-update-05](../assets/images/solutions/generative-ai-use-cases-update/genu-update-05.png)

å†ã³ã€New Terminal ã‚’æŠ¼ã—ã¦ã€Terminal ã‚’é–‹ãã¾ã™ã€‚  
![genu-update-01](../assets/images/solutions/generative-ai-use-cases-update/genu-update-01.png)

GenU ã‚’ clone ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ã€‚  
```shell
cd /home/sagemaker-user/generative-ai-use-cases/
```

å‰ã®æ‰‹é †ã§ç¢ºèªã—ãŸ Parameter Store ã®å€¤ã‚’åˆ©ç”¨ã—ã¦ã€`parameter.ts` ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã„ãã¾ã™ã€‚  
Environment ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® dev ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã—ãŸè‡ªå‹•è¨­å®šãŒå¯èƒ½ã§ã™ã€‚

!!! Tip
    `dev` ä»¥å¤–ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€Parameter Store ã®å€¤ã‚’æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦`parameter.ts` ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ç·¨é›†ã—ã¦ãã ã•ã„ã€‚

```shell
PARAMS=$(aws ssm get-parameter --name "/genu/dev.json" --with-decryption --query "Parameter.Value" --output text)
```

æ¬¡ã«ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ç™ºè¡Œã—ã¦ã€`parameter.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¾ã™ã€‚  

```shell
node -e "
const fs = require('fs');
const params = $PARAMS;
let content = fs.readFileSync('packages/cdk/parameter.ts', 'utf8');
const devStart = content.indexOf('dev: {');
const devEnd = content.indexOf('},', devStart) + 2;
const jsonString = JSON.stringify(params, null, 2);
const indentedJson = jsonString.split('\n').map((line, index) => {
  if (index === 0) return line;
  return '  ' + line;
}).join('\n');
const newDevSection = 'dev: ' + indentedJson + ',';
content = content.substring(0, devStart) + newDevSection + content.substring(devEnd);
fs.writeFileSync('packages/cdk/parameter.ts', content);
"
```

ä»¥ä¸‹ã®ã‚ˆã†ã« dev ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ãŒç·¨é›†ã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚  

```ts
  dev: {
    "modelRegion": "us-east-1",
    "modelIds": [
      "us.anthropic.claude-sonnet-4-20250514-v1:0",
      "us.anthropic.claude-opus-4-20250514-v1:0",
      "us.deepseek.r1-v1:0",
      "us.anthropic.claude-3-7-sonnet-20250219-v1:0",
      "us.anthropic.claude-3-5-haiku-20241022-v1:0",
      "us.amazon.nova-premier-v1:0",
      "us.amazon.nova-pro-v1:0",
      "us.amazon.nova-lite-v1:0",
      "us.amazon.nova-micro-v1:0"
    ],
    "ragKnowledgeBaseEnabled": true,
    "selfSignUpEnabled": false,
    "allowedSignUpEmailDomains": [
      "gmail.com"
    ],
    "allowedIpV4AddressRanges": null,
    "allowedIpV6AddressRanges": null
  },
  staging: {
    // Parameters for staging environment
  },
  prod: {
    // Parameters for production environment
  },
```

ã“ã‚ŒãŒç·¨é›†å¾Œã®ç”»é¢ä¾‹ã§ã™ã€‚  
![genu-update-06](../assets/images/solutions/generative-ai-use-cases-update/genu-update-06.png)

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä»Šå›ã®æ‰‹é †ã§ã¯ã€åˆ©ç”¨ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’å¤‰æ›´ã—ã¾ã™ã€‚  
![genu-update-07](../assets/images/solutions/generative-ai-use-cases-update/genu-update-07.png)

ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¾ã™ã€‚  
```shell
npm ci
```

å®Ÿè¡Œä¾‹  
```shell
sagemaker-user@default:~/generative-ai-use-cases$ npm ci
npm warn deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead
npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
npm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
npm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.

> generative-ai-use-cases@4.2.7 prepare
> husky


added 2416 packages, and audited 2461 packages in 2m

477 packages are looking for funding
  run `npm fund` for details

3 moderate severity vulnerabilities

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
npm notice
npm notice New minor version of npm available! 11.3.0 -> 11.4.1
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.4.1
npm notice To update run: npm install -g npm@11.4.1
npm notice
sagemaker-user@default:~/generative-ai-use-cases$ 
```


GenU ã‚’æ›´æ–°ã—ã¾ã™ã€‚`env=dev` ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã„ Environent åã‚’æŒ‡å®šã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ dev ã§ã™ã€‚  

```shell
npm run cdk:deploy:quick -- -c env=dev
```


å®Ÿè¡Œä¾‹  

```shell
sagemaker-user@default:~/generative-ai-use-cases$ npm run cdk:deploy:quick -- -c env=dev

> generative-ai-use-cases@4.2.7 cdk:deploy:quick
> npm -w packages/cdk run cdk deploy -- --all --asset-parallelism --asset-prebuild=false --concurrency 3 --method=direct --require-approval never --force -c env=dev


> cdk
> cdk deploy --all --asset-parallelism --asset-prebuild=false --concurrency 3 --method=direct --require-approval never --force -c env=dev

`cdk synth` may hang in Docker on Linux 5.6-5.10. See https://github.com/aws/aws-cdk/issues/21379 for workarounds.
Bundling asset GenerativeAiUseCasesStackdev/API/Predict/Code/Stage...

  packages/cdk/cdk.out/bundling-temp-d7718a9e133c5da897e2705c0897279a63ba1441a740635cdf58a04513f40f3e-building/index.js  3.3mb âš ï¸

âš¡ Done in 438ms

added 114 packages, and audited 120 packages in 5s

3 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

```


ä¸€å®šæ™‚é–“å¾Œã€ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã—ã¾ã™ã€‚å…ƒã® GenU ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸã€‚  

```shell
GenerativeAiUseCasesStackdev.WebUrl = https://xxxxxxxxx.cloudfront.net
Stack ARN:
arn:aws:cloudformation:us-east-1:xxxxxxxxxx:stack/GenerativeAiUseCasesStackdev/83dbd1f0-3ecb-11f0-a659-0e0290ae6345

âœ¨  Total time: 378.4s

sagemaker-user@default:~/generative-ai-use-cases$ 
```

### 2 å›ç›®ä»¥é™ã« GenU ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹æ‰‹é † {#second-time-update}
SageMaker Code Editor ã‚’åˆ©ç”¨ã—ã¦ã€2 å›ç›®ä»¥é™ã« GenU ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹æ‰‹é †ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚1 å›ç›®ã§ã¯ git clone ã‚’åˆ©ç”¨ã—ã¦ã„ãŸã®ã«å¯¾ã—ã¦ã€2 å›ç›®ã¯æ—¢ã« clone æ¸ˆã¿ãªã®ã§æ‰‹é †ãŒãŒå¤‰ã‚ã‚Šã¾ã™ã€‚  
SageMaker Code Editor ã‚’é–‹ã„ãŸã‚ã¨ã€Open Folder ã§ GenU ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é–‹ãã¾ã™ã€‚

![genu-update-repeat-01](../assets/images/solutions/generative-ai-use-cases-update/genu-update-repeat-01.png)

!!! Warning
    `packages/cdk/parameter.ts` ã‚’é–‹ã„ã¦ã€`dev` ã‚„ `staging` ã‚„ `prod` ã®å€¤ã‚’æ‰‹å…ƒã«ãƒ¡ãƒ¢ã‚’ã—ã¾ã™ã€‚**ãªãã—ãŸå ´åˆã¯å¾©å…ƒãŒå›°é›£ãªã®ã§ã€ãƒ¡ãƒ¢ã‚’ã—å¿˜ã‚Œç„¡ã„ã‚ˆã†ã«æ³¨æ„ã—ã¾ã—ã‚‡ã†ï¼**  

![genu-update-repeat-02](../assets/images/solutions/generative-ai-use-cases-update/genu-update-repeat-02.png)

git clone ã‚’ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ã€‚  

```shell
cd /home/sagemaker-user/generative-ai-use-cases/
```

Code Editor ã§ç·¨é›†ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã®å†…å®¹ã‚’ã™ã¹ã¦å…ƒã®çŠ¶æ…‹ã«æˆ»ã—ã¾ã™ã€‚`parameter.ts` ä»¥å¤–ã«ç·¨é›†ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ã™ã¹ã¦æ¶ˆãˆã¦ã—ã¾ã†ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚

```shell
git reset --hard
```

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã¾ã™ã€‚

```shell
git pull
```

npm ci ã§ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¾ã™ã€‚

```shell
npm ci
```

`parameter.ts` ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¾ã™ã€‚å…ˆã»ã©é€€é¿ã—ãŸã€`dev` ã‚„ `staging` ã‚„ `prod` ã®å€¤ã‚’å…ƒã«æˆ»ã—ã¾ã™ã€‚  
![genu-update-repeat-02](../assets/images/solutions/generative-ai-use-cases-update/genu-update-repeat-02.png)

GenU ã‚’æ›´æ–°ã—ã¾ã™ã€‚`env=dev` ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã„ Environent åã‚’æŒ‡å®šã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ dev ã§ã™ã€‚  

```shell
npm run cdk:deploy:quick -- -c env=dev
```

ã“ã‚Œã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå®Œäº†ã§ã™ï¼

---

## GenU ã‚’å‰Šé™¤ã™ã‚‹æ‰‹é † {#genu-delete}

SageMaker Code Editor ã‚’åˆ©ç”¨ã—ã¦ã€GenU ã‚’å‰Šé™¤ã™ã‚‹æ‰‹é †ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

SageMaker Code Editor ã‚’é–‹ã„ãŸã‚ã¨ã€Open Folder ã§ GenU ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é–‹ãã¾ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ git clone ã‚’ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ã€‚  

```shell
cd /home/sagemaker-user/generative-ai-use-cases/
```

GenU ã‚’å‰Šé™¤ã—ã¾ã™ã€‚`env=dev` ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã„ Environent åã‚’æŒ‡å®šã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ dev ã§ã™ã€‚  

```shell
npm run cdk:destroy -- -c env=dev
```
