# Customer 360 Text2SQL セグメンテーション & エンティティ解決

[Customer 360 Text2SQL セグメンテーション & エンティティ解決](https://github.com/aws-samples/sample-c360-text2sql-segmentation-entityresolution)は、顧客データの統合、セグメンテーション、および自然言語によるデータクエリを可能にする包括的なソリューションです。AWS Entity Resolution と Amazon Personalize を活用し、散在する顧客データを統合して360度の顧客ビューを構築し、ビジネスインサイトの獲得を支援します。

## 主な機能

- **エンティティ解決**: AWS Entity Resolution を使用した顧客データの統合
- **Text2SQL**: Amazon Bedrock を活用した自然言語でのデータベースクエリ機能
- **顧客セグメンテーション**: Amazon Personalize による高度な顧客セグメンテーション
- **Webインターフェース**: 直感的なWebUIでの操作とデータ可視化
- **リアルタイム処理**: Step Functions による効率的なデータ処理ワークフロー
- **スケーラブル設計**: サーバーレスアーキテクチャによる自動スケーリング

## 主要ユースケース

- **顧客データ統合**: 複数のシステムに散在する顧客情報を統合
- **顧客セグメンテーション**: 統合された顧客データを基にした精密なセグメント作成
- **データ分析の民主化**: 自然言語クエリによる非技術者でも可能なデータ分析
- **マーケティング最適化**: 統合された顧客ビューを活用したターゲティング

## AWS へのデプロイ

次のボタンからデプロイできます。AWS へログイン後クリックしてください。

<div class="solution-card__actions">
  <div class="solution-card__deployment">
    <select class="region-selector">
      <option value="ap-northeast-1">東京</option>
      <option value="us-east-1">バージニア</option>
      <option value="us-west-2">オレゴン</option>
    </select>
    <a href="https://ap-northeast-1.console.aws.amazon.com/cloudformation/home#/stacks/create/review?stackName=C360DeploymentStack&templateURL=https://aws-ml-jp.s3.ap-northeast-1.amazonaws.com/asset-deployments/C360DeploymentStack.yaml" class="deployment-button md-button" target="_blank">
      <i class="fa-solid fa-rocket"></i>　Deploy
    </a>
  </div>
</div>

### パラメータ設定

デプロイ時に以下のパラメータを設定できます：

* **NotificationEmailAddress**: デプロイの開始・終了を通知するメールアドレス
* **EntityResolutionEnabled**: AWS Entity Resolution 機能の有効化（デフォルト: false）
* **PersonalizeEnabled**: Amazon Personalize 機能の有効化（デフォルト: false、EntityResolution が true の場合のみ利用可能）

### デプロイ後の設定

デプロイのボタンを押すと、しばらくしてから `AWS Notification - Subscription Confirmation` というメールが届くため `Confirm subscription` のリンクを押してください。これで、デプロイの開始、終了のメールが届くようになります。

デプロイが完了すると通知メールが以下の情報とともに届きます：

1. **フロントエンドURL**: アプリケーションにアクセスするためのURL
2. **Amazon Bedrock モデルアクセス設定**: Text2SQL 機能に必要なモデルへのアクセス有効化手順
3. **データアップロード手順**: CSV ファイルのアップロード方法
4. **設定情報**: デプロイ時に指定したパラメータの確認

### リソースの削除

デプロイしたリソースを削除するには、CloudFormation コンソールから以下のスタックを削除します：

1. C360 メインスタック
2. `C360DeploymentStack` デプロイメントスタック

!!! warning "注意"
    スタック削除により、統合された顧客データやセグメンテーション結果もすべて削除されます。必要なデータは事前にエクスポートしてください。

## 使用方法

**このアプリケーションを利用するには、デプロイ後にテストデータ（CSV形式）をS3バケットにアップロードする必要があります。** デプロイ完了後、以下の手順でデータ準備を行ってください：

1. テストデータ生成スクリプトを実行してCSVファイルを作成
2. 生成されたCSVファイルを指定のS3バケットにアップロード  
3. AWS Step Functionsでデータ統合ワークフローを実行
4. Amazon Cognitoでユーザーを作成

詳細な手順については、[プロジェクトのREADME](https://github.com/aws-samples/sample-c360-text2sql-segmentation-entityresolution#テストデータ準備)をご参照ください。
